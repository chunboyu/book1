<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="qrcode.js"></script>
    <style type="text/css">
    textarea{
    	margin-top: 15px;
    	}
    	.button1,#down_button{
    		    margin:15px 0 0 10px;
    position: relative;
    width: 50px;
    height: 50px;
    	}
    	#theface{
    		margin-top:15px;
    		
    	}
    	/*#sharepic > div{
    		height:200px;float:left; display:inline;
    	}*/
    	#showtitle{
    			width: 400px;
        height: 200px;
        word-break: break-all;
        display: none;background-color: darkgray;
        float: left;
    	}
    	#showtitle > div{
    	display: table-cell;
      vertical-align: middle;
      font-size: 25pt;
}
			#qrcode{
				display: inline-block;
			}
    	/*#showtitle > p{
margin:0 auto;
width: 300px;
height: auto;
}*/
    	
    </style>
  </head>
  <body>
    <input type="text" value="" placeholder="请输入网址全称（例如http://www.deafchina.com）" style="width:70%;display: block;" />
    
   	<textarea name="" rows="3" cols="90%" placeholder="请输入描述二维码的文字（可以不输入）" style="float: left;"></textarea>
    <input class="button1" type="button" value="确定"/>
    <input type="button"  class="btn btn-default" id="down_button" value="保存图片"/>
    <div id="theface" >
    	<div id="showtitle" ><div id="showname"></div></div>
    	<div id="qrcode" ></div>
    </div>
     
    
    <iframe id="ifm" name="ifm" src="" width="" height="" style="display: none;"></iframe>
  </body>
  <script src="app.js" type="text/javascript" charset="utf-8"></script>
	<script src="html2canvas.js" type="text/javascript"></script>
	<script src="piwik.js" type="text/javascript" charset="utf-8"></script>
	<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
	<script src="http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
  <script type="text/javascript">

  var text = document.querySelector('input[type=text]'),
      btn = document.querySelector('.button1'),
      iframe = document.querySelector('iframe'),
      textarea = document.querySelector('textarea'),
      showname = document.querySelector('#showname'),
       showtitle = document.querySelector('#showtitle'),
      qrcode = new QRCode(
        document.querySelector('#qrcode'), {
      	width : 200,
      	height : 200
      });

  btn.addEventListener('click', 
  function () {
    qrcode.makeCode(text.value);
    iframe.setAttribute('src', text.value);
    if(textarea.value){
    	showtitle.style.display='inline-table';
    }
    showname.innerText = textarea.value;
    print($('#down_button'));
   
//  setTimeout(function(){
//var cc =window.frames["ifm"].document.getElementsByTagName('title').innerHTML;
//  alert(cc);
//
//},1000);
//  
  })
		
</script>
</html>
